import{_ as k,u as y,R as F,a as A,b as S,c as u,d as r,e as t,l as d,v as f,F as p,r as m,t as i,m as V,g as L,i as w,o as l,p as b,n as j,f as D,w as _,h as a,k as v,j as B}from"./index-DNP_rAM8.js";const x=y(),g="http://127.0.0.1:8000/api",C={name:"FlightsView",components:{RouterLink:F},setup(){const n="https://www.frontair.nl"+L().path;A({title:"Flights - FrontAir",link:[{rel:"canonical",href:n}],meta:[{name:"description",content:"The flight schedule page of FrontAir, a flight booking web application. Welcome to FrontAir, your one-stop destination for booking flights at the best prices. Find deals on international and domestic flights, compare airlines, and plan your perfect trip."},{name:"keywords",content:"flight schedule, flights, flight booking, cheap flights, airline tickets, travel, FrontAir, flight deals, international flights, domestic flights"},{name:"author",content:"FrontAir"},{property:"og:title",content:"Flights - FrontAir"},{property:"og:description",content:"The flight schedule page of FrontAir, a flight booking web application. Welcome to FrontAir, your one-stop destination for booking flights at the best prices. Find deals on international and domestic flights, compare airlines, and plan your perfect trip."},{property:"og:type",content:"website"},{property:"og:url",content:"https://www.frontair.nl"},{property:"og:image",content:"https://www.frontair.nl/images/frontair_logo.webp"}]})},data(){return{flights:[],airports:[],airlines:[],bookings:[],airline:"",departure_airport:"",arrival_airport:"",date:"",limit:10,loading:!0}},computed:{theme(){return S().siteTheme},user(){return x}},watch:{airline:function(){this.retrieveFlights()},departure_airport:function(){this.retrieveFlights()},arrival_airport:function(){this.retrieveFlights()}},mounted(){this.retrieveAirlines(),this.retrieveAirports(),x.user&&this.retrieveBookings(),this.retrieveFlights()},methods:{formatDate(s){return new Date(s).toLocaleDateString("nl-NL",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZone:"GMT"})},retrieveFlights(){u.get(g+"/flights?sort_by=id&sort_order=DESC&limit="+this.limit+"&airline_id="+this.airline+"&departure_airport_id="+this.departure_airport+"&arrival_airport_id="+this.arrival_airport).then(s=>{console.log(s.data),this.flights=s.data}).catch(s=>{console.error(s)}).finally(()=>{this.loading=!1})},retrieveAirports(){u.get(g+"/airports").then(s=>{console.log(s.data),this.airports=s.data}).catch(s=>{console.error(s)})},retrieveAirlines(){u.get(g+"/airlines").then(s=>{console.log(s.data),this.airlines=s.data}).catch(s=>{console.error(s)})},flightLimit(s){this.limit+=s,this.retrieveFlights()},retrieveBookings(){u.get(g+"/users/"+x.user.id+"/bookings").then(s=>{console.log(s.data),this.bookings=s.data.bookings}).catch(s=>{console.error(s)})},isFlightBooked(s){if(this.bookings.length>0){for(let n=0;n<this.bookings.length;n++)if(this.bookings[n].flight_id==s)return console.log("found e"),!0}else return!1}}},N={class:"mb-4 pt-20 text-center md:text-left"},T=t("div",{class:"flex justify-center gap-4 md:justify-start"},[t("h1",null,"Flight Schedule")],-1),U=t("p",null,"View our Flight Schedule below and book a flight!",-1),R={class:"mx-auto mb-12 mt-4 flex max-w-[400px] flex-col md:mx-0"},M={class:"collapse collapse-arrow mr-auto bg-base-200"},E=t("input",{type:"checkbox",name:"checkbox"},null,-1),W=t("div",{class:"collapse-title text-xl font-medium"}," Filters ",-1),z={class:"collapse-content text-center md:text-left"},G=t("p",{class:"font-bold"}," Destination ",-1),H=t("option",{disabled:""}," From ",-1),I=t("option",{value:"0",selected:""}," Any ",-1),Z=["value"],q=t("option",{disabled:""}," To ",-1),J=t("option",{value:"0",selected:""}," Any ",-1),K=["value"],O=t("p",{class:"mt-4 font-bold"}," Airline ",-1),P=t("option",{value:"0",selected:""}," All ",-1),Q=["value"],X=w('<p class="mt-4 font-bold"> Date selection </p><div class="relative max-w-sm"><div class="pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3.5"><i class="bi bi-calendar-fill text-lg"></i></div><input type="text" class="block w-full rounded-lg border p-2.5 ps-10 text-sm caret-primary transition-colors focus:border-primary focus:outline-none focus:ring-blue-500" placeholder="Select date"></div>',2),Y={key:0,class:"grid auto-rows-fr grid-cols-12 gap-4 px-4"},$=["src","alt"],ee={class:"card-body"},te={class:"card-title justify-center"},se={class:"relative flex justify-between rounded-lg bg-base-200 px-4"},oe={class:"p-1 text-center lg:col-span-2"},ie={class:"text-2xl"},le={class:"text-xs"},ne=t("br",null,null,-1),re={class:"mt-4 hidden lg:block"},ae=t("div",{class:"mt-3 flex h-10 w-10 rotate-90 items-center justify-center"},[t("i",{class:"bi bi-airplane-fill"})],-1),ce={class:"p-1 text-center lg:col-span-2"},de={class:"text-2xl"},pe={class:"text-xs"},he=t("br",null,null,-1),ue={class:"mt-4 hidden lg:block"},me={class:"card-actions items-end justify-between"},_e={class:"w-full text-center text-4xl sm:w-1/3 sm:text-left md:w-auto"},ge=t("span",{class:"text-lg font-normal"},"/pp",-1),fe={key:1,class:"h-screen w-full text-center"},ve=t("p",null,"No flights found.",-1),xe=[ve],be={key:2,class:"grid auto-rows-fr grid-cols-12 gap-4 px-4"},we=w('<div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div><div class="card skeleton col-span-12 min-h-[443px] shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3"></div>',10),ke=[we],ye={key:3,class:"mb-12 mt-4 flex flex-col items-center justify-center"};function Fe(s,n,Ae,Se,o,c){const h=B("RouterLink");return l(),r(p,null,[t("section",N,[T,U,t("div",R,[t("div",M,[E,W,t("div",z,[G,d(t("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>o.departure_airport=e),class:"select select-bordered w-1/2 border caret-primary outline-none transition-colors focus:border-primary focus:outline-none"},[H,I,(l(!0),r(p,null,m(o.airports,e=>d((l(),r("option",{key:e.id,value:e.id},i(e.country)+", "+i(e.name)+" ("+i(e.iata)+") ",9,Z)),[[b,o.arrival_airport!=e.id]])),128))],512),[[f,o.departure_airport]]),d(t("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>o.arrival_airport=e),class:"select select-bordered w-1/2 border caret-primary outline-none transition-colors focus:border-primary focus:outline-none"},[q,J,(l(!0),r(p,null,m(o.airports,e=>d((l(),r("option",{key:e.id,value:e.id},i(e.country)+", "+i(e.name)+" ("+i(e.iata)+") ",9,K)),[[b,o.departure_airport!=e.id]])),128))],512),[[f,o.arrival_airport]]),O,d(t("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>o.airline=e),class:"select select-bordered w-full border caret-primary outline-none transition-colors focus:border-primary focus:outline-none"},[P,(l(!0),r(p,null,m(o.airlines,e=>(l(),r("option",{key:e.id,value:e.id},i(e.name),9,Q))),128))],512),[[f,o.airline]]),X])])])]),o.flights.length>0&&!o.loading?(l(),r("div",Y,[(l(!0),r(p,null,m(o.flights,e=>(l(),r("div",{key:e.id,class:j(["group card col-span-12 min-h-[443px] bg-base-100 shadow-lg md:col-span-6 xl:col-span-4 2xl:col-span-3",c.theme=="frontair"?"":"shadow-white/30"])},[t("figure",null,[t("img",{class:"h-60 w-full object-cover object-center",src:"../src/assets/images/airlines/"+e.airline.name.toLowerCase().replace(/\s/g,"_")+"/"+e.image+".webp",alt:e.airline.name!=null?e.airline.name:"Image of Airline"},null,8,$)]),t("div",ee,[t("h2",te,[D(h,{to:{name:"flights.show",params:{id:e.id}},class:"hover:underline"},{default:_(()=>[a(i(e.flight_number.toUpperCase()+" - "+e.airline.name),1)]),_:2},1032,["to"])]),t("div",se,[t("div",oe,[t("p",ie,i(e.departure_airport.iata),1),t("p",le,[a(i(e.departure_airport.name)+",",1),ne,a(" "+i(e.departure_airport.country),1)]),t("p",re,i(c.formatDate(e.departure_time)),1)]),ae,t("div",ce,[t("p",de,i(e.arrival_airport.iata),1),t("p",pe,[a(i(e.arrival_airport.name)+",",1),he,a(" "+i(e.arrival_airport.country),1)]),t("p",ue,i(c.formatDate(e.arrival_time)),1)])]),t("div",me,[t("b",_e,[a("â‚¬"+i(e.price),1),ge]),c.user.isLoggedIn&&!c.isFlightBooked(e.id)?(l(),v(h,{key:0,to:{name:"flights.show",params:{id:e.id}},class:"btn btn-primary w-full sm:w-1/2 md:w-auto"},{default:_(()=>[a(" Book Flight ")]),_:2},1032,["to"])):c.user.isLoggedIn?(l(),v(h,{key:2,to:{name:"bookings.index"},class:"btn btn-warning w-full sm:w-1/2 md:w-auto"},{default:_(()=>[a(" View booking ")]),_:1},8,["to"])):(l(),v(h,{key:1,to:{name:"login"},class:"btn btn-warning w-full sm:w-1/2 md:w-auto"},{default:_(()=>[a(" Login to book ")]),_:1}))])])],2))),128))])):o.flights.length===0&&!o.loading?(l(),r("div",fe,xe)):(l(),r("div",be,ke)),o.flights&&o.limit<=o.flights.length?(l(),r("div",ye,[t("p",null,"Current limit: "+i(o.limit),1),t("button",{class:"btn btn-secondary",onClick:n[3]||(n[3]=e=>c.flightLimit(10))}," View More ")])):V("",!0)],64)}const Le=k(C,[["render",Fe]]);export{Le as default};
